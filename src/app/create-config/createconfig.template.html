<div class="md-padding" ng-cloak layout="column">
    <mat-card>
        <mat-card-title>Create New Configuration</mat-card-title>
        <mat-card-content>
            <form [formGroup]="configurationCreateForm" novalidate (ngSubmit)="createConfiguration(createConfigForm)">
                <mat-form-field>
                    <input name="version" matInput placeholder="Version" type="text" formControlName="version">
                </mat-form-field>
                <div formArrayName="modules">
                    <h2>Modules</h2>
                    <div *ngFor="let module of configurationCreateForm.controls.modules.controls; let i=index">
                        <div>
                            <h3>Module {{i + 1}}</h3>
                            <span *ngIf="configurationCreateForm.controls.modules.controls.length > 1" (click)="removeModule(i)"></span>
                        </div>
                        <div [formGroupName]="i">
                            <mat-form-field>
                                <input name="name" matInput placeholder="Name" type="text" formControlName="name">
                            </mat-form-field>
                            <mat-form-field>
                                <input name="version" matInput placeholder="Version" type="text" formControlName="version">
                            </mat-form-field>
                            <mat-form-field>
                                <input name="repository" matInput placeholder="Repository" type="text" formControlName="repository">
                            </mat-form-field>
                            <mat-form-field>
                                <input name="branch" matInput placeholder="Branch" type="text" formControlName="branch">
                            </mat-form-field>
                            <mat-form-field>
                                <input name="tag" matInput placeholder="Tag" type="text" formControlName="tag">
                            </mat-form-field>
                        </div>
                    </div>
                </div>
                <div formArrayName="parameters">
                    <h2>Parameters</h2>
                    <div *ngFor="let parameter of configurationCreateForm.controls.parameters.controls; let i=index">
                        <div>
                            <h3>Parameter {{i + 1}}</h3>
                            <a ng-button *ngIf="configurationCreateForm.controls.modules.controls.length > 1" (click)="removeModule(i)">-</a>
                        </div>
                        <div [formGroupName]="i">
                            <div>
                                <mat-form-field>
                                    <input name="name" matInput placeholder="Name" type="text" formControlName="name">
                                </mat-form-field>
                                <mat-form-field>
                                    <input name="requestKey" matInput placeholder="Request key" type="text" formControlName="requestKey">
                                </mat-form-field>
                                <mat-form-field>
                                    <input name="type" matInput placeholder="Type" type="text" formControlName="type">
                                </mat-form-field>
                                <mat-form-field>
                                    <input name="key" matInput placeholder="Key" type="text" formControlName="key">
                                </mat-form-field>
                                <mat-form-field>
                                    <input name="expression" matInput placeholder="Expression" type="text" formControlName="expression">
                                </mat-form-field>
                                <mat-form-field>
                                    <input name="fileName" matInput placeholder="File name" type="text" formControlName="fileName">
                                </mat-form-field>
                                <mat-form-field>
                                    <input name="location" matInput placeholder="Location" type="text" formControlName="location">
                                </mat-form-field>
                            </div>
                        </div>
                    </div>
                </div>
                <button mat-button type="submit" [disabled]="!configurationCreateForm.valid">Submit</button>
            </form>
        </mat-card-content>
    </mat-card>
</div>